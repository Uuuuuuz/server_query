# QChatGPT Steam服务器查询插件

这是一个用于查询 CS2/Steam 服务器信息的 QChatGPT 插件。

## 主要功能

1. **服务器查询**
   - 查询 CS2/Steam 服务器实时状态
   - 显示服务器详细信息
   - 生成服务器连接命令

## 命令列表

### 基本命令
1. `!ping query <IP:端口>` - 查询服务器信息
   例如：`!ping query 127.0.0.1:27015`

### 查询结果包含
- 服务器名称
- 当前地图
- 游戏类型和描述
- 在线玩家数（包括机器人）
- 服务器延迟（ms）
- 服务器平台
- 游戏版本
- VAC 状态
- 服务器可见性
- 服务器标签
- 连接命令

## 配置说明

配置文件位于 `config.json`：

```json
{
    "servers": {
        "example": {
            "ip": "127.0.0.1",
            "port": "27015",
            "description": "示例服务器"
        }
    }
}
```

## 使用示例

1. **查询服务器**
   ```
   !ping query 127.0.0.1:27015
   ```
   返回服务器详细信息，包括：
   ```
   服务器名称: XXX
   地图: de_dust2
   游戏: CS2
   描述: XXX
   标签: XXX
   玩家数: 10/32
   延迟: 50ms
   平台: Windows
   版本: XXX
   VAC状态: Secured
   可见性: Public

   Connect命令:
   connect 127.0.0.1:27015
   ```

## 注意事项

1. 查询超时时间为 5 秒
2. 服务器必须允许 Source Query 协议查询
3. 部分服务器可能因防火墙设置无法查询
4. 查询结果包含服务器实时状态

## 常见问题

1. **查询超时**
   - 检查服务器 IP 和端口是否正确
   - 确认服务器是否在线
   - 检查服务器是否允许 Source Query 查询

2. **数据解析错误**
   - 服务器可能不支持 Source Query 协议
   - 服务器返回的数据格式可能不标准
   - 尝试重新查询

## 技术说明

1. 使用 Source Query 协议查询服务器
2. 支持 Source2 引擎的 A2S_INFO 查询
3. 自动处理查询挑战响应
4. 支持 UTF-8 编码的服务器信息
